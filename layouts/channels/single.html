{{ define "main" }}
  {{ $channelSlug := (or .Params.channel (index (split .Page.RelPermalink "/") 1)) }}
  {{ $channels := $.Site.Data.channels }}
  {{ $scratch := newScratch }}
  {{ range $channels }}
    {{ if eq .slug $channelSlug }}
      {{ $scratch.Set "channel" . }}
    {{ end }}
  {{ end }}
  {{ $channel := $scratch.Get "channel" }}

  <h1 class="heading"><a href="{{ .Page.RelPermalink }}">{{ .Title }}</a></h1>

  <div class="content">
    <p>{{ $channel.description }}</p>

    {{ with $channel.providers.youtube }}
      <a href="{{ .url }}" target="_blank" title="{{ .name }}">YouTube</a>
    {{ end }}
    {{ with $channel.providers.patreon }}
      <a href="{{ .url }}" target="_blank" title="{{ .name }}">Patreon</a>
    {{ end }}
    {{ with $channel.providers.twitter }}
      <a href="{{ .url }}" target="_blank" title="@{{ .slug }}">Twitter</a>
    {{ end }}
    {{ with $channel.providers.instagram }}
      <a href="{{ .url }}" target="_blank" title="@{{ .slug }}">Instagram</a>
    {{ end }}
  </div>

  {{ partial "playlists/videos.html" . }}
{{ end }}
